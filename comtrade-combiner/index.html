<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>COMTRADE File Combiner - Separate Tool</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>‚öôÔ∏è COMTRADE File Combiner</h1>
        <p class="subtitle">
          Combine multiple COMTRADE files with time-window based merging
        </p>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Left Panel: Settings -->
        <div class="panel settings-panel">
          <h2>üìã Settings & Configuration</h2>

          <!-- File Upload -->
          <div class="form-group">
            <label>Select COMTRADE Files</label>
            <input type="file" id="fileInput" multiple accept=".cfg,.dat" />
            <small>Select .cfg and .dat file pairs</small>
          </div>

          <!-- Time Window Setting -->
          <div class="form-group">
            <label>Time Window (seconds)</label>
            <input
              type="number"
              id="timeWindow"
              value="2"
              min="0.1"
              step="0.1"
            />
            <small
              >Files with timestamps within this window will be combined</small
            >
          </div>

          <!-- Channel Filtering Options -->
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="removeDuplicates" checked />
              ‚úì Remove Duplicate Channels
            </label>
            <small>Remove channels with identical names</small>
          </div>

          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="removeSimilar" checked />
              ‚úì Remove Similar Channels
            </label>
            <small
              >Detect and remove channels with nearly identical values</small
            >
          </div>

          <div class="form-group checkbox-group">
            <label>
              Similarity Threshold:
              <input
                type="number"
                id="similarityThreshold"
                value="0.95"
                min="0.5"
                max="1"
                step="0.01"
              />
            </label>
            <small
              >0.5 = 50% similar, 1.0 = 100% identical (higher = more
              strict)</small
            >
          </div>

          <!-- Action Buttons -->
          <div class="button-group">
            <button id="analyzeBtn" class="btn btn-primary">
              üîç Analyze Files
            </button>
            <button id="combineBtn" class="btn btn-success" disabled>
              ‚úÖ Combine & Export
            </button>
            <button id="resetBtn" class="btn btn-secondary">üîÑ Reset</button>
          </div>
        </div>

        <!-- Right Panel: Preview & Results -->
        <div class="panel preview-panel">
          <h2>üìä Preview & Analysis</h2>

          <!-- File List -->
          <div class="section">
            <h3>Uploaded Files</h3>
            <div id="fileList" class="file-list">
              <p class="placeholder">No files selected yet</p>
            </div>
          </div>

          <!-- Analysis Results -->
          <div class="section">
            <h3>Analysis Results</h3>
            <div id="analysisResults" class="analysis-results">
              <p class="placeholder">Click "Analyze Files" to see results</p>
            </div>
          </div>

          <!-- Combined Groups -->
          <div class="section">
            <h3>Combine Groups</h3>
            <div id="combineGroups" class="combine-groups">
              <p class="placeholder">Results will appear here</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Status Bar -->
      <div class="status-bar">
        <span id="statusText">Ready</span>
      </div>
    </div>

    <!-- Modal for detailed info -->
    <div id="detailsModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="modalTitle">Details</h2>
        <div id="modalBody"></div>
      </div>
    </div>

    <script type="module" src="src/app.js"></script>
  </body>
</html>
